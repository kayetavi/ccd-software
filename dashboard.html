<!DOCTYPE html>
<html>
<head>
  <title>CCD Pro Dashboard</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="app">

  <!-- ========== SIDEBAR ========== -->
  <aside class="sidebar">
    <h2 class="logo">CCD Pro</h2>

    <nav>
      <button class="tab active" onclick="openTab('projectSection')">ğŸ“ Project</button>
      <button class="tab" onclick="openTab('loopSection')">ğŸ” Corrosion Loops</button>
      <button class="tab" onclick="openTab('circuitSection')">ğŸ§© Circuits</button>
      <button class="tab" onclick="openTab('damageSection')">âš ï¸ Damage</button>
      <button class="tab" onclick="openTab('reportSection')">ğŸ“„ CCD Report</button>
    </nav>
  </aside>

  <!-- ========== MAIN CONTENT ========== -->
  <main class="content">

    <!-- ================= PROJECT ================= -->
    <section id="projectSection" class="box">
      <h3>Project</h3>

      <label><b>Select Existing Project</b></label><br>
      <select id="projectSelect" style="width:320px"></select><br><br>
      <button onclick="switchProject()">Load Project</button>

      <hr>

      <label><b>Create / Edit Project</b></label>
      <input id="plant" placeholder="Plant Name">
      <input id="unit" placeholder="Process Unit">

      <button onclick="createProject()">â• Create Project</button>
      <button onclick="updateProject()">âœï¸ Update Project</button>

      <p id="projectStatus" style="font-weight:bold;margin-top:10px"></p>
    </section>

    <!-- ================= LOOPS ================= -->
    <section id="loopSection" class="box" style="display:none">
      <h3>Corrosion Loops</h3>

      <input id="systemName" placeholder="Loop / System Name">
      <textarea id="systemDesc" placeholder="Process description"></textarea>
      <button onclick="addSystem()">Add Loop</button>

      <div id="systems"></div>
    </section>

    <!-- ================= CIRCUITS ================= -->
    <section id="circuitSection" class="box" style="display:none">
      <h3>Circuits</h3>

      <!-- ADD CIRCUIT -->
      <h4>Add New Circuit</h4>

      <input id="circuitName" placeholder="Circuit Name">
      <input id="material" placeholder="Material">
      <input id="temp" placeholder="Temp (Â°C)">
      <input id="pressure" placeholder="Pressure (bar)">

      <label><b>Process Fluid</b></label>
      <select id="processFluidSelect"></select>

      <label><b>Stream Phase</b></label>
      <select id="streamPhaseSelect"></select>

      <label><b>Inspection Techniques</b></label>
      <div id="inspectionList"></div>

      <button onclick="addCircuit()">â• Add Circuit</button>

      <hr>

      <!-- CIRCUIT LIST -->
      <h4>Existing Circuits</h4>
      <div id="circuits"></div>

      <hr>

      <!-- ================= CONSTITUENTS ================= -->
      <h4>d) Critical Process Constituents</h4>

      <p style="color:#555">
        <b>Selected Circuit:</b>
        <span id="activeCircuitLabel">None</span>
      </p>

      <table style="width:100%">
        <tr>
          <td>H2S</td>
          <td><input id="h2s" placeholder="ppm"></td>
        </tr>
        <tr>
          <td>CO2</td>
          <td><input id="co2" placeholder="ppm / NA"></td>
        </tr>
        <tr>
          <td>O2</td>
          <td><input id="o2" placeholder="%"></td>
        </tr>
        <tr>
          <td>Chlorides</td>
          <td><input id="chlorides" placeholder="ppm"></td>
        </tr>
      </table>

      <button onclick="saveConstituents()">ğŸ’¾ Save Constituents</button>
      <div id="constituentStatus" style="margin-top:5px;font-weight:bold"></div>

    </section>

    <!-- ================= DAMAGE ================= -->
    <section id="damageSection" class="box" style="display:none">
      <h3>Damage Mechanisms</h3>

      <div id="damageList"></div>

      <div id="damageSummary" style="display:none">
        <h4>Selected Damage Mechanisms</h4>
        <ul id="damageSummaryList"></ul>
      </div>

      <button onclick="generateReport()">ğŸ“„ Generate CCD Report</button>
    </section>

    <!-- ================= REPORT ================= -->
    <section id="reportSection" class="box" style="display:none">

      <div style="text-align:right;margin-bottom:10px">
        <button onclick="downloadPDF()">â¬‡ Download PDF</button>
      </div>

      <div id="ccdReport" style="font-family:Arial;font-size:12px;color:#000">
        <!-- REPORT GENERATED -->
      </div>

    </section>

  </main>
</div>

<!-- ================= LIBRARIES ================= -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<!-- ================= SCRIPTS ================= -->
<script type="module" src="js/dashboard.js"></script>
<script type="module" src="js/systems.js"></script>
<script type="module" src="js/circuits.js"></script>
<script type="module" src="js/damage.js"></script>
<script type="module" src="js/report.js"></script>

</body>
</html>
